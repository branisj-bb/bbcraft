---
import BaseLayout from '../../layouts/BaseLayout.astro';
import ProductCard from '../../components/ProductCard.astro';
import produkty from '../../data/produkty.json';

export function getStaticPaths() {
  const categories = ['kuze', 'mech', 'vence'];

  return categories.map((category) => ({
    params: { category },
    props: {
      category,
      produkty: produkty.filter((p) => p.category === category)
    }
  }));
}

interface Props {
  category: string;
  produkty: any[];
}

const { category, produkty: produktyKategorie } = Astro.props as Props;

const categoryLabelMap: Record<string, string> = {
  kuze: 'Kůže',
  mech: 'Mech',
  vence: 'Věnce'
};

const seoTitleMap: Record<string, string> = {
  kuze: 'Kožené výrobky – peněženky, popruhy, pouzdra',
  mech: 'Dekorace z mechu a přírodnin',
  vence: 'Věnce na dveře a stůl z přírodních materiálů'
};

const seoDescriptionMap: Record<string, string> = {
  kuze:
    'Ručně vyráběné kožené peněženky, popruhy na fotoaparát, pouzdra na brýle a další doplňky z kvalitní kůže. Poctivá česká ruční výroba BB Craft.',
  mech:
    'Originální mechové dekorace a přírodní aranžmá pro váš interiér. Ručně vyráběné dekorace z mechu, dřeva a sušených květin od BB Craft.',
  vence:
    'Ručně vázané věnce na dveře i na stůl z přírodních materiálů. Celoroční i sezónní dekorace z české dílny BB Craft.'
};

const title = categoryLabelMap[category] ?? category;
const pageTitle = seoTitleMap[category] ?? title;
const description =
  seoDescriptionMap[category] ??
  `Ručně vyráběné produkty v kategorii ${title} z české dílny BB Craft.`;
const url = `https://bbcraft.cz/produkty/${category}`;
---

<BaseLayout title={pageTitle} description={description} url={url}>
  <div class="max-w-[94rem] mx-auto px-4 py-12">
    <h1 class="text-3xl font-bold mb-8 uppercase blur-heading">{title}</h1>

    {produktyKategorie.length === 0 ? (
      <p class="text-sm text-neutral-500">
        V této kategorii zatím nemáme žádné produkty.
      </p>
    ) : (
      <div class="grid gap-16 md:grid-cols-2">
        {produktyKategorie.map((p, i) => (
          <ProductCard product={p} index={p.id} />
        ))}
      </div>
    )}
  </div>
</BaseLayout>