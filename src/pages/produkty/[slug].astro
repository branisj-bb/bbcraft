---
import BaseLayout from '../../layouts/BaseLayout.astro';
import produkty from '../../data/produkty.json';

// ✅ Tohle doplň úplně nahoru
export async function getStaticPaths() {
  return produkty.map(p => ({
    params: { slug: p.slug },
    props: { produkt: p }
  }));
}

const { produkt } = Astro.props;
---
<BaseLayout title={produkt.title}>
  <div class="max-w-7xl mx-auto px-6 py-16 grid md:grid-cols-2 gap-16">

    <!-- LEVÁ STRANA: TEXT + NUMERACE + CENA + TLAČÍTKO -->
    <div class="flex flex-col justify-center">
      <div class="relative">
        <span class="block lg:inline-block lg:absolute lg:-right-10 lg:top-0 text-4xl lg:text-7xl text-neutral-300 mb-2 lg:mb-0">
          {String(produkt.id ?? '').padStart(2, '0')}
        </span>
        <h1 class="text-4xl md:text-5xl font-bold uppercase leading-tight">
          {produkt.title}
        </h1>
      </div>

      <p class="whitespace-pre-line mt-8 text-sm leading-7 max-w-md font-courier">
        {produkt.description}
      </p>

      <div class="mt-12 text-3xl font-bold">
        {produkt.price} Kč
      </div>

      <a href={produkt.payment} class="mt-12 font-bold text-center mt-1 inline-block px-8 py-4 border border-black uppercase tracking-wide hover:bg-neutral-100">
        Přejít k platbě
      </a>
      <p class="mt-2 text-xs text-neutral-500 text-center">
        Po kliknutí budete přesměrováni na zabezpečenou platební stránku Stripe.
      </p>
    </div>

    <!-- PRAVÁ STRANA: OBRÁZKY V PODKLADU -->
    <div class="grid grid-cols-1 gap-12">
      <img src={produkt.image} alt={produkt.title} class="w-full object-cover" />
      {produkt.image2 && (
        <img src={produkt.image2} alt={`${produkt.title} detail`} class="w-full object-cover" />
      )}
    </div>

  </div>
</BaseLayout>