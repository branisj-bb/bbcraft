---
import BaseLayout from '../../layouts/BaseLayout.astro';
import produkty from '../../data/produkty.json';

// ✅ Tohle doplň úplně nahoru
export async function getStaticPaths() {
  return produkty.map(p => ({
    params: { slug: p.slug },
    props: { produkt: p }
  }));
}

const { produkt } = Astro.props;
---
<BaseLayout title={produkt.title}>
  <div class="max-w-7xl mx-auto px-6 py-16 grid md:grid-cols-2 gap-16">

    <!-- LEVÁ STRANA: TEXT + NUMERACE + CENA + TLAČÍTKO -->
    <div class="flex flex-col justify-center">
      <div class="relative">
        <h1 class="text-4xl md:text-5xl font-bold uppercase leading-tight">
          {produkt.title}
        </h1>
        <span class="absolute -right-10 top-0 text-6xl md:text-7xl text-neutral-300">
          {String(produkt.index ?? 0).padStart(2, '0')}
        </span>
      </div>

      <p class="mt-8 text-sm leading-7 max-w-md font-courier">
        {produkt.description}
      </p>

      <p class="mt-10 font-semibold tracking-wide">
        Péče o výrobek
      </p>

      <div class="mt-12 text-3xl font-bold">
        {produkt.price} Kč
      </div>

      <!-- Payment methods image -->
      <img src="/images/payments.png" alt="Available payment methods"
        class="mt-6 w-48 opacity-90" />

      <a href={produkt.payment} class="mt-1 inline-block px-8 py-4 border border-black uppercase tracking-wide hover:bg-neutral-100">
        Zaplatit
      </a>
    </div>

    <!-- PRAVÁ STRANA: OBRÁZKY V PODKLADU -->
    <div class="grid grid-cols-1 gap-12">
      <img src={produkt.image} alt={produkt.title} class="w-full object-cover" />
      {produkt.image2 && (
        <img src={produkt.image2} alt={`${produkt.title} detail`} class="w-full object-cover" />
      )}
    </div>

  </div>
</BaseLayout>