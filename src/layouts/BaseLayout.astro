---
import "../styles/global.css";

const {
  title,
  description = "Ručně vyráběné kožené výrobky, peněženky, popruhy na foťák, pouzdra na brýle a přírodní věnce z české dílny BB Craft.",
  url = "https://bbcraft.cz"
} = Astro.props;

const isHome = Astro.url.pathname === "/";
---

<html lang="cs">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title ? `${title} | BB Craft` : "BB Craft"}</title>
    <meta name="description" content={description} />
    <link rel="canonical" href={url} />

    <!-- Open Graph / social -->
    <meta property="og:type" content="website" />
    <meta
      property="og:title"
      content={title ? `${title} | BB Craft` : "BB Craft"}
    />
    <meta property="og:description" content={description} />
    <meta property="og:url" content={url} />
    <meta property="og:site_name" content="BB Craft" />
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@300..800&display=swap"
      rel="stylesheet"
    />
    <link rel="icon" type="image/png" href="/images/favicon.png" />
  </head>

  <body class="text-[#1a1a1a] bg-[#ffffff] min-h-screen flex flex-col">
    <!-- HLAVIČKA — čistá, bez textury -->
 <header
  data-home={isHome ? "true" : "false"}
  class={`w-full font-bold fixed top-0 left-0 right-0 z-50 transition-colors duration-300 blur-heading
    ${
      isHome
        ? "bg-transparent"
        : "bg-[#ffffff] shadow-md"
    }
  `}
    >
      <div
        class="max-w-[94rem] mx-auto px-6 pt-3 pb-2 flex justify-between items-center"
      >
        <a href="/" class="block">
          <div class="relative inline-block">
            <img
              src="/images/logo.png"
              alt="BB Craft"
              class="h-10 sm:h-16 md:h-20"
            />
            <span class="absolute inset-0 flex  justify-center">
              <span
                class="text-lg sm:text-xl tracking-[0.25em] uppercase"
                style="text-shadow: 0 0 3px rgba(0,0,0,0.6), 0 0 6px rgba(255, 255, 255, 0.924), 0 0 2px white;"
              >
                BB Craft
              </span>
            </span>
          </div>
        </a>
        <!-- Navigace vlevo -->
        <nav
          class="hidden sm:flex text-xs sm:text-sm tracking-wide uppercase flex flex-col space-y-0 items-center"
        >
       <!--  <nav class="hidden sm:flex text-xs sm:text-sm tracking-wide uppercase space-x-6"> -->
          <a href="/produkty/kuze" class="hover:opacity-70 transition-opacity"
            >Kůže</a
          >
          <a href="/produkty/mech" class="hover:opacity-70 transition-opacity"
            >Mech</a
          >
          <a href="/produkty/vence" class="hover:opacity-70 transition-opacity"
            >Věnce</a
          >
          <a href="/o-nas" class="hover:opacity-70 transition-opacity">O nás</a>
        </nav>
        <!-- MOBILE HAMBURGER (jen na mobilech) -->
        <button id="hamburger" class="sm:hidden text-3xl focus:outline-none blur-heading">
          ☰
        </button>

        <!-- MOBILE MENU SIDEBAR -->
        <div
          id="mobileMenu"
          class="fixed top-0 right-0 h-full w-64 bg-white shadow-xl transform translate-x-full transition-transform duration-300 z-50 flex flex-col p-6 space-y-6"
        >
          <button id="closeMenu" class="text-3xl self-end">×</button>

          <a href="/produkty/kuze" class="uppercase tracking-wide text-lg"
            >Kůže</a
          >
          <a href="/produkty/mech" class="uppercase tracking-wide text-lg"
            >Mech</a
          >
          <a href="/produkty/vence" class="uppercase tracking-wide text-lg"
            >Věnce</a
          >
          <a href="/o-nas" class="uppercase tracking-wide text-lg">O nás</a>
        </div>
        <!-- OVERLAY -->
        <div
          id="overlay"
          class="fixed inset-0 bg-black bg-opacity-40 backdrop-blur-sm z-40 opacity-0 pointer-events-none transition-opacity duration-300"
        ></div>
      </div>
    </header>

    <!-- OBSAH -->
    <main class="flex-1 max-w-[94rem] mx-auto w-full px-6 pt-32 pb-10">
      <slot />
    </main>

    <!-- FOOTER -->
    <footer class="max-w-7xl mx-auto w-full px-6 pb-14">
      <!-- ŠNEK + KONTAKTY V ŘÁDKU -->
      <section class="mt-20 mb-12 flex flex-row justify-between items-center">
        <div class="text-xs uppercase tracking-[0.15em] space-y-4">
          <div>
            <a href="mailto:info@bbcraft.cz" class="hover:opacity-70 transition-opacity">info@bbcraft.cz</a>
          </div>
          <div>
            <a href="https://www.instagram.com/bbcraft.cz" target="_blank" class="hover:opacity-70 transition-opacity">instagram.com/bbcraft.cz</a>
          </div>
        </div>

        <img
          src="/images/snek.webp"
          alt="Šnek – symbol trpělivosti"
          class="w-40 md:w-80 max-w-full"
        />
      </section>
    </footer>
  </body>
</html>
<script>
  // mobilní menu
  const menu = document.getElementById("mobileMenu");
  const openBtn = document.getElementById("hamburger");
  const closeBtn = document.getElementById("closeMenu");
  const overlay = document.getElementById("overlay");

  openBtn?.addEventListener("click", () => {
    menu.classList.remove("translate-x-full");
    overlay.classList.remove("opacity-0", "pointer-events-none");
  });

  closeBtn?.addEventListener("click", () => {
    menu.classList.add("translate-x-full");
    overlay.classList.add("opacity-0", "pointer-events-none");
  });

  // změna headeru při scrollu jen na homepage
  const header = document.querySelector("header[data-home='true']");

if (header) {
  const onScroll = () => {
    if (window.scrollY > 50) {
      header.classList.remove("bg-transparent");
      header.classList.add("bg-[#ffffff]", "shadow-md");
    } else {
      header.classList.add("bg-transparent");
      header.classList.remove("bg-[#ffffff]", "shadow-md");
    }
  };

  window.addEventListener("scroll", onScroll);
  onScroll();
}
</script>